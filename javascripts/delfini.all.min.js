/** 
 * Delfini UI
 * -------------------------------
 *
 * ForwardFour Innovations: http://forwardfour.com/
 * Delfini UI: http://delfiniui.com/
 * 
 * LICENSE
 * 
 * By viewing, using, or actively developing this framework in any way, you are
 * henceforth bound the license agreement, and all of its changes, set forth by
 * ForwardFour Innovations or the Delfini UI Group. The license can be found,
 * in its entirety, at this address: http://delfiniui.com/license.
 * 
 * Copyright (c) 2012 and Onwards, ForwardFour Innovations & The Delfini UI Group
 * http://delfiniui.com/license [Proprietary]
 *
 *
 *
 * Included in this file:
 *  - delfini.dialog
 *  - delfini.menu
 *  - delfini.textinput
*/

(function(a){a(document).ready(function(){a.fn.delfini_dialog=function(e){var f=a(this);if(e&&e=="close"){f.animate({top:"-900px"},function(){f.remove()});f.trigger("dialogClosed");return true}f.animate({top:"0px"},function(){f.trigger("dialogOpened")})};var d=a("ul.dropdown");var b=a("ul.dropdown li");d.wrap('<div class="dropdownWrapper" />').after(function(){var e=a(this);a(this).trigger("dropdownReady");return'<input name="'+e.attr("data-name")+'" type="hidden" value="'+e.children("li.selected").text()+'"/>'});d.click(function(){var e=a(this);var g=e.offset().left;var f=e.offset().top;var h=a(window).height();e.addClass("open");if(f+e.height()>h){f-=(f+e.height()+20)-h}e.css({left:g+"px",position:"absolute",top:f+"px"});e.trigger("menuOpened")});a(document).click(function(f){if(!a(f.target).is("ul.dropdown")&&!a(f.target).parents().is("ul.dropdown")){d.removeClass("open").removeAttr("style")}});b.click(function(h){var g=a(this);var i=g.parent();var f=true;if(i.hasClass("open")){if(g.parent().children("li.selected").is(g)){f=false}g.addClass("reservedItemCurrentlySelcted").siblings("li.selected").removeClass("selected").siblings("li.reservedItemCurrentlySelcted").removeClass("reservedItemCurrentlySelcted").addClass("selected");i.removeClass("open").removeAttr("style");h.stopPropagation();i.siblings("input").val(g.text());currentMenu.trigger("menuItemSelected");if(f){currentMenu.trigger("newMenuItemSelected")}}});var c=a("input:text, input:password, input[type=email], input[type=search]");c.wrap('<div class="inputWrapper" />').after(function(){var e=a(this);e.trigger("textInputReady");if(e.attr("type").toLowerCase()=="password"){return e.hasClass("noIcon")?"<span />":'<span class="passwordPeak" title="Press and hold to view this password" />'}else{return e.hasClass("noIcon")?"<span />":'<span class="inputClear" title="Click to clear contents" />'}});c.siblings("span").mousedown(function(){var f=a(this);var e=f.siblings("input");if(e.attr("type").toLowerCase()=="password"){var g=e.attr("value");e.hide();a('<input class="passwordViewer" type="text" />').attr("value",g).insertAfter(f);e.trigger("passwordVisible")}else{e.val("");e.trigger("inputCleared")}});c.siblings("span").bind("mouseup mouseout",function(){var f=a(this);var e=f.siblings("input");if(e.attr("type").toLowerCase()=="password"){f.siblings("input.passwordViewer").remove();e.show();e.trigger("passwordHidden")}})})})(jQuery);